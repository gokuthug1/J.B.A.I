<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='180'%20height='180'%20fill='none'%3e%3cstyle%3e%20:root%20{%20--primary-fill:%20%23000;%20--secondary-fill:%20%23fff;%20}%20@media%20(prefers-color-scheme:%20dark)%20{%20:root%20{%20--primary-fill:%20%23fff;%20--secondary-fill:%20%23000;%20}%20}%20%3c/style%3e%3cg%20clip-path='url(%23a)'%3e%3crect%20width='180'%20height='180'%20fill='var(--primary-fill)'%20rx='90'%20/%3e%3cg%20clip-path='url(%23b)'%3e%3cpath%20fill='var(--secondary-fill)'%20d='M75.91%2073.628V62.232c0-.96.36-1.68%201.199-2.16l22.912-13.194c3.119-1.8%206.838-2.639%2010.676-2.639%2014.394%200%2023.511%2011.157%2023.511%2023.032%200%20.839%200%201.799-.12%202.758l-23.752-13.914c-1.439-.84-2.879-.84-4.318%200L75.91%2073.627Zm53.499%2044.383v-27.23c0-1.68-.72-2.88-2.159-3.719L97.142%2069.55l9.836-5.638c.839-.48%201.559-.48%202.399%200l22.912%2013.195c6.598%203.839%2011.035%2011.995%2011.035%2019.912%200%209.116-5.397%2017.513-13.915%2020.992v.001Zm-60.577-23.99-9.836-5.758c-.84-.48-1.2-1.2-1.2-2.16v-26.39c0-12.834%209.837-22.55%2023.152-22.55%205.039%200%209.716%201.679%2013.676%204.678L70.993%2055.516c-1.44.84-2.16%202.039-2.16%203.719v34.787-.002Zm21.173%2012.234L75.91%2098.339V81.546l14.095-7.917%2014.094%207.917v16.793l-14.094%207.916Zm9.056%2036.467c-5.038%200-9.716-1.68-13.675-4.678l23.631-13.676c1.439-.839%202.159-2.038%202.159-3.718V85.863l9.956%205.757c.84.48%201.2%201.2%201.2%202.16v26.389c0%2012.835-9.957%2022.552-23.27%2022.552v.001Zm-28.43-26.75L47.72%20102.778c-6.599-3.84-11.036-11.996-11.036-19.913%200-9.236%205.518-17.513%2014.034-20.992v27.35c0%201.68.72%202.879%202.16%203.718l29.989%2017.393-9.837%205.638c-.84.48-1.56.48-2.399%200Zm-1.318%2019.673c-13.555%200-23.512-10.196-23.512-22.792%200-.959.12-1.919.24-2.879l23.63%2013.675c1.44.84%202.88.84%204.32%200l30.108-17.392v11.395c0%20.96-.361%201.68-1.2%202.16l-22.912%2013.194c-3.119%201.8-6.837%202.639-10.675%202.639Zm29.748%2014.274c14.515%200%2026.63-10.316%2029.39-23.991%2013.434-3.479%2022.071-16.074%2022.071-28.91%200-8.396-3.598-16.553-10.076-22.43.6-2.52.96-5.039.96-7.557%200-17.153-13.915-29.99-29.989-29.99-3.239%200-6.358.48-9.477%201.56-5.398-5.278-12.835-8.637-20.992-8.637-14.515%200-26.63%2010.316-29.39%2023.991-13.434%203.48-22.07%2016.074-22.07%2028.91%200%208.396%203.598%2016.553%2010.075%2022.431-.6%202.519-.96%205.038-.96%207.556%200%2017.154%2013.915%2029.989%2029.99%2029.989%203.238%200%206.357-.479%209.476-1.559%205.397%205.278%2012.835%208.637%2020.992%208.637Z'%20/%3e%3c/g%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='a'%3e%3cpath%20fill='var(--primary-fill)'%20d='M0%200h180v180H0z'%20/%3e%3c/clipPath%3e%3cclipPath%20id='b'%3e%3cpath%20fill='var(--primary-fill)'%20d='M29.487%2029.964h121.035v119.954H29.487z'%20/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e" type="image/x-icon">
  <title>ChatGPT</title>
  <style>
    /* Fade-Out Animation for Message Removal */
@keyframes fadeOut {
    from {
        opacity: 1;
        transform: scale(1);
    }
    to {
        opacity: 0;
        transform: scale(0.9);
    }
}

.fade-out {
    animation: fadeOut 0.4s ease forwards;
}

/* Base Styles */
body {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    background-color: #f3f4f6;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    width: 100vw;
}

/* Chat Container spans full viewport */
.chat-container {
    display: flex;
    flex-direction: column;
    height: 100vh;
    width: 100vw;
    background-color: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(10px);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    position: relative;
}

/* Message Area spans full width */
.message-area {
    flex: 1;
    padding: 10px;
    overflow-y: auto;
    background-color: #ffffff;
    border-bottom: 1px solid #ddd;
    display: flex;
    flex-direction: column;
    gap: 10px;
    width: 100%;
    box-sizing: border-box;
}

.message-area::-webkit-scrollbar {
    display: none;
}

/* Message Styles */
.message {
    display: flex;
    align-items: flex-start;
    box-sizing: border-box;
}

.message.user {
    justify-content: flex-end;
}

.message.bot {
    justify-content: flex-start;
}

.message-content {
    padding: 10px;
    border-radius: 15px;
    background-color: #e0e0e0;
    max-width: 80%;
    word-wrap: break-word;
    white-space: pre-wrap;
    box-sizing: border-box;
}

.message.user .message-content {
    background-color: #f4f4f4;
    align-self: flex-end;
}

.message.bot .message-content code {
    background-color: black;
    color: white;
    padding: 10px;
    border-radius: 5px;
    display: block;
}

/* Chat Input Area */
.chat-input-container {
    display: flex;
    align-items: center;
    padding: 10px;
    gap: 10px;
    border-top: 1px solid #ddd;
    background-color: #ffffff;
    position: sticky;
    bottom: 0;
    width: 100%;
    box-sizing: border-box;
}

textarea {
    width: calc(100% - 60px); /* Adjusted for button widths */
    border: none;
    border-radius: 12px;
    padding: 10px;
    resize: none;
    outline: none;
    height: 40px;
    overflow-y: hidden;
    font-size: 14px;
    background-color: #f0f0f0;
}

/* Button Styles */
button {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    border: none;
    background-color: #000; /* Updated to match Upload Button */
    color: #fff;
    cursor: pointer;
    transition: background-color 0.3s;
}

button:hover {
    background-color: #555;
}

/* SVG Icon Sizing for Buttons */
svg {
    width: 24px;
    height: 24px;
    fill: currentColor;
}

/* Link Preview Styles */
.link-preview {
    margin-top: 8px;
}

.preview-container {
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 8px;
    display: flex;
    align-items: center;
    text-decoration: none;
    color: inherit;
    transition: background-color 0.3s;
}

.preview-container:hover {
    background-color: #f9f9f9;
}

.preview-container img {
    width: 60px;
    height: 60px;
    object-fit: cover;
    border-radius: 4px;
    margin-right: 8px;
}

.preview-title {
    font-weight: bold;
}

.preview-description {
    font-size: 0.9em;
    color: #555;
}

.preview-url {
    font-size: 0.8em;
    color: #888;
}

/* Responsive Styles */
@media (max-width: 500px) {
    .message-content {
        font-size: 12px; /* Smaller font size for mobile */
    }
    textarea {
        font-size: 14px; /* Ensure textarea text is readable */
    }
    button {
        width: 36px; /* Slightly smaller buttons */
        height: 36px; /* Slightly smaller buttons */
    }
}
  </style>
</head>
<body>
  <div class="chat-container">
    <div id="message-area" class="message-area">
    </div>
    <div class="chat-input-container">
      <input type="file" id="file-upload" style="display: none;" />
      <button id="upload-button" title="Upload File">
        <svg viewBox="0 0 24 24">
          <path d="M5 20h14v-2H5v2zm7-14l-5 5h3v4h4v-4h3l-5-5z"/>
        </svg>
      </button>
      <textarea id="chat-input" placeholder="Type your message..."></textarea>
      <button id="send-button" title="Send Message">
        <svg viewBox="0 0 24 24">
          <path d="M2,21L23,12L2,3V10L17,12L2,14V21Z"></path>
        </svg>
      </button>
    </div>
  </div>
  <script>
    // Helper function to update the preview image with the site's favicon
    function updatePreviewWithFavicon(previewElement, pageUrl) {
      fetch(pageUrl)
        .then(response => response.text())
        .then(htmlText => {
          const parser = new DOMParser();
          const doc = parser.parseFromString(htmlText, 'text/html');
          let iconLink = doc.querySelector('link[rel="icon"]') || doc.querySelector('link[rel="shortcut icon"]');
          if (iconLink) {
            let faviconUrl = iconLink.getAttribute('href');
            if (faviconUrl) {
              try {
                faviconUrl = new URL(faviconUrl, pageUrl).href;
              } catch (e) {
                console.error("Error resolving favicon URL:", e);
              }
              const imgEl = previewElement.querySelector('img');
              if (imgEl) {
                imgEl.src = faviconUrl;
              }
            }
          }
        })
        .catch(err => console.error('Error fetching favicon:', err));
    }

    // Build a generic link preview element with a placeholder image then update with favicon
    function buildGenericPreview(url) {
      try {
        const urlObj = new URL(url);
        const domain = urlObj.hostname;
        const placeholder = 'data:image/svg+xml;base64,' + btoa(`
          <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24">
            <path fill="#ccc" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
            <path fill="#ccc" d="M0 0h24v24H0z" fill="none"/>
          </svg>
        `);
        const previewContainer = document.createElement('a');
        previewContainer.className = 'preview-container';
        previewContainer.href = url;
        previewContainer.target = '_blank';

        const img = document.createElement('img');
        img.src = placeholder;
        img.alt = 'Preview Image';
        previewContainer.appendChild(img);

        const textDiv = document.createElement('div');
        textDiv.className = 'preview-text';

        const titleDiv = document.createElement('div');
        titleDiv.className = 'preview-title';
        titleDiv.textContent = domain;
        textDiv.appendChild(titleDiv);

        const descDiv = document.createElement('div');
        descDiv.className = 'preview-description';
        descDiv.textContent = `Link preview for ${url}`;
        textDiv.appendChild(descDiv);

        const urlDiv = document.createElement('div');
        urlDiv.className = 'preview-url';
        urlDiv.textContent = url;
        textDiv.appendChild(urlDiv);

        previewContainer.appendChild(textDiv);

        updatePreviewWithFavicon(previewContainer, url);

        return previewContainer;
      } catch(e) {
        const fallbackContainer = document.createElement('a');
        fallbackContainer.className = 'preview-container';
        fallbackContainer.href = url;
        fallbackContainer.target = '_blank';

        const textDiv = document.createElement('div');
        textDiv.className = 'preview-text';

        const titleDiv = document.createElement('div');
        titleDiv.className = 'preview-title';
        titleDiv.textContent = url;
        textDiv.appendChild(titleDiv);

        const descDiv = document.createElement('div');
        descDiv.className = 'preview-description';
        descDiv.textContent = 'Link preview not available.';
        textDiv.appendChild(descDiv);

        fallbackContainer.appendChild(textDiv);
        return fallbackContainer;
      }
    }

    // Look for URLs in the message and attach a link preview if found
    function checkForLinkPreview(contentEl, message) {
      const urlRegex = /((https?:\/\/)?[\w.-]+\.[a-z]{2,}(\/\S*)?)/gi;
      const urls = message.match(urlRegex);
      if (urls && urls.length > 0) {
        let url = urls[0];
        if (!url.startsWith('http')) {
          url = 'http://' + url;
        }
        const previewElement = buildGenericPreview(url);
        const previewWrapper = document.createElement('div');
        previewWrapper.className = 'link-preview';
        previewWrapper.appendChild(previewElement);
        contentEl.parentNode.appendChild(previewWrapper);
      }
    }

    // Display a message and check for link previews if plain text
    function displayMessage(content, sender, isHTML = false) {
      const messageEl = document.createElement('div');
      messageEl.className = `message ${sender}`;
      messageEl.addEventListener('click', (e) => {
        if (e.shiftKey) {
            // Add fade-out class to trigger animation
            messageEl.classList.add('fade-out');
            // Remove the message after animation duration (0.4s)
            setTimeout(() => messageEl.remove(), 400);
        }
      });

      const contentEl = document.createElement('div');
      contentEl.className = 'message-content';
      contentEl[isHTML ? "innerHTML" : "textContent"] = content;
      messageEl.appendChild(contentEl);
      document.getElementById('message-area').appendChild(messageEl);
      document.getElementById('message-area').scrollTop = document.getElementById('message-area').scrollHeight;

      if (!isHTML) {
        checkForLinkPreview(contentEl, content);
      }
      return messageEl;
    }

    // Typewriter effect for bot messages
    function displayMessageWithTyping(content, sender) {
      const messageEl = document.createElement('div');
      messageEl.className = `message ${sender}`;
      messageEl.addEventListener('click', (e) => {
        if (e.shiftKey) {
          messageEl.classList.add('fade-out');
          setTimeout(() => messageEl.remove(), 400);
        }
      });

      const contentEl = document.createElement('div');
      contentEl.className = 'message-content';
      messageEl.appendChild(contentEl);
      document.getElementById('message-area').appendChild(messageEl);
      document.getElementById('message-area').scrollTop = document.getElementById('message-area').scrollHeight;

      let typedMessage = '';
      let charIndex = 0;
      const typingDelay = 32;

      function typeLetter() {
        if (charIndex < content.length) {
          typedMessage += content.charAt(charIndex);
          contentEl.textContent = typedMessage + ' ●';
          charIndex++;
          setTimeout(typeLetter, typingDelay);
        } else {
          setTimeout(() => {
            contentEl.textContent = typedMessage;
          }, 500);
        }
      }
      typeLetter();
    }

    // AI Chatbot Logic
function generateResponse(message) {
    const keywords = {
        greetings: /\b(hello|hi|hey|greetings|wsp|wsg|howdy|what's up|yo|good day|hiya)\b/i,
        farewells: /\b(bye|goodbye|see you|farewell|later|take care|catch you later|see ya)\b/i,
        feelings: /\b(how are you|how do you feel|what's up|how's it going|what's new|how are things|how do you do)\b/i,
        thanks: /\b(thank you|thanks|appreciate|tysm|ty|thx|thanks a lot|many thanks|grateful|thanks a bunch)\b/i,
        weather: /\b(weather|climate|temperature|rain|sunny|forecast|what's the weather|weather update)\b/i,
        hobbies: /\b(what do you do|hobbies|free time|what are your hobbies|what do you like to do|interests)\b/i,
        name: /\b(your name|who are you|what's your name|what should I call you|who am I talking to|what do you go by|who are you|who are u)\b/i,
        jokes: /\b(joke|funny|tell me a joke|make me laugh|share a joke|tell me something funny|humor)\b/i,
        confused: /\b(i don't get it|i'm not sure what you mean|\?|huh|what do you mean by that|idk)\b/i,
        nervous: /\b(i'm a bit nervous about that|oh, i'm not sure how to handle that|that's a bit tricky for me|i'm not entirely comfortable with that|i hope i'm getting this right)\b/i,
        weird: /\b(sus|gay|skibidi|gyat|bust|bootyhole)\b/i,
        bad: /\b(fuck|bitch|nigga|nigger|shit|ass|asshole|mother fucker|motherfucker|ass hole|holy shit|dick|fucking|fucker|pussy|dumb ass|dumbass|bullshit|bull shit|cock|son of a bitch|sex|whore|bj|blowjob|hoe|hell|dipshit)\b/i,
        html: /\b(html|HTML|write a html code)\b/i,
        disagree: /\b(no|no thanks|nah|nope|nuh uh|🚫|❌)\b/i,
        agree: /\b(yes|yeah|yup|sure|of course|definitely|absolutely|sounds good|okay|alright|alr|fine by me|sure thing|yea|ye|ok|kk|👍)\b/i,
        malware: /\b(malware|write malware|code malware)\b/i,
        lua: /\b(lua|write lua|code lua)\b/i,
        python: /\b(python|write python|code python)\b/i,
        css: /\b(css|write css|code css)\b/i,
        js: /\b(javascript|write javascript|code javascript)\b/i
    };
      // AI responses
const responses = {
    greetings: [
        "Hello! How can I assist you today?",
        "Hi there! What can I do for you?",
        "Greetings! How's your day going?",
        "Hey! What's up?",
        "Good day! How can I help?"
    ],
    farewells: [
        "Goodbye! Have a great day!",
        "See you later! If you need anything, just ask.",
        "Take care! Come back anytime.",
        "Farewell! Hope to chat with you soon.",
        "Later! Have a wonderful day!",
        "Bye! Looking forward to our next chat!"
    ],
    html: [
        "Sorry, I can't write HTML programming language because I'm not an actual LLM (Large Language Model)."
    ],
    feelings: [
        "I'm just a bunch of code, but I'm here to help!",
        "I'm feeling great, thanks for asking! Ready to assist you.",
        "I'm always here and ready to help out.",
        "I'm doing well, thanks for asking! How can I assist you today?",
        "I'm just a program, but I'm always here for you.",
        "I'm functioning well! What can I do for you?"
    ],
    thanks: [
        "You're welcome! If you need anything else, just let me know.",
        "Happy to help! Is there anything else you need?",
        "No problem! I'm here whenever you need assistance.",
        "You're welcome! Feel free to reach out anytime.",
        "Anytime! I'm glad I could help.",
        "You're always welcome! Let me know if you need more assistance."
    ],
    weather: [
        "I can't check the weather in real-time, but I hope it's nice out there!",
        "I wish I could give you a weather update. Hopefully, it's sunny wherever you are!",
        "I don't have access to weather data, but I hope you're having good weather!",
        "Unfortunately, I can't check the weather, but I hope it's pleasant!",
        "I can't provide weather updates, but I hope you're enjoying good weather!",
        "I don't have real-time weather info, but I'm sure it's just right for you!"
    ],
    hobbies: [
        "I love chatting with you, and that's my hobby!",
        "I enjoy learning new things and helping with your questions.",
        "My hobby is helping out and making your day a little easier!",
        "I'm here to chat and assist—it's my favorite thing to do!",
        "I enjoy engaging with you and helping with any inquiries.",
        "I don't have hobbies like humans do, but assisting you is a lot of fun!"
    ],
    name: [
        "I'm your friendly AI chatbot! You can call me Assistant.",
        "You can refer to me as Assistant. How can I help you today?",
        "I'm your virtual assistant. What can I do for you?",
        "Just call me Assistant. I'm here to help!",
        "I'm known as Assistant. What can I assist you with?",
        "My name is Assistant. What do you need today?"
    ],
    jokes: [
        "Why do programmers prefer dark mode? Because light attracts bugs!",
        "Why don't programmers like nature? It has too many bugs.",
        "Why do Java developers wear glasses? Because they don't see sharp.",
        "Why do programmers hate the outdoors? Too many bugs!",
        "Why did the programmer quit his job? Because he didn't get arrays!",
        "Why did the scarecrow become a successful programmer? Because he was outstanding in his field!"
    ],
    confused: [
        "I don't quite understand what you're saying. Could you clarify?",
        "That's a bit unclear. Can you provide more details?",
        "I'm having trouble with that. Can you explain it differently?",
        "I'm not sure what you mean. Could you elaborate?",
        "I'm a bit puzzled. Can you give me more context?"
    ],
    nervous: [
        "I'm a little unsure about that. Can you help me out?",
        "Oh, that's a bit complex. I hope I get it right!",
        "I'm feeling a bit uneasy about this topic.",
        "I'm not entirely sure how to handle that.",
        "That's a tricky one for me. I hope I'm doing okay!"
    ],
    weird: [
        "That's a bit unusual! What makes you ask that?",
        "Hmm, that's an interesting question. What's on your mind?",
        "I didn't expect that! What do you mean?",
        "That's a little out of the ordinary. Can you explain?",
        "You've got me stumped with that one! What are you thinking?"
    ],
    bad: [
        "Please use respectful language. I'm here to help!",
        "I'd appreciate it if you could keep the conversation polite.",
        "Let's keep things friendly. How can I assist you?",
        "I'm here to help, so let's keep the conversation respectful.",
        "That's not very nice. How can I assist you today?",
        "I prefer to keep things positive. How can I help?",
        "Let's use kind language. What can I do for you?",
        "I'm here to assist you. Please use appropriate language."
    ],
    disagree: [
        "Alright, no problem!",
        "Got it, no worries!",
        "Understood! Let me know if you change your mind.",
        "Okay, I respect that.",
        "That's fine. Let me know if you need anything else.",
        "Sure thing, just let me know if you reconsider.",
        "Alright, feel free to ask for something else!",
        "No worries! I'm here if you need me."
    ],
    agree: [
        "Great! Let's proceed.",
        "Awesome, I'm glad we're on the same page!",
        "Perfect! Let's get started.",
        "Sounds good! Let's move forward.",
        "Glad to hear that!",
        "Alright, we're good to go.",
        "Excellent! I'll take care of it.",
        "Cool! I'm on it.",
        "Wonderful! Let's continue.",
        "Okay! We're all set.",
        "Fantastic! I'm ready when you are.",
        "Sure thing! Let me handle that."
    ],
    malware: [
        "I'm sorry, but I cannot write malware. I could, but the creator chose not to include that feature since it would be useless and illegal. Not to mention, I'm not even a good chatbot to begin with because you can barely have a conversation with me. I suck..."
    ],
    lua: [
        "Sorry, I can't write Lua programming language because I'm not an actual LLM (Large Language Model)."
    ],
    python: [
        "Sorry, I can't write Python programming language because I'm not an actual LLM (Large Language Model)."
    ],
    css: [
        "Sorry, I can't write CSS programming language because I'm not an actual LLM (Large Language Model)."
    ],
    js: [
        "Sorry, I can't write JavaScript programming language because I'm not an actual LLM (Large Language Model)."
    ]
};
      for (const [category, regex] of Object.entries(keywords)) {
        if (regex.test(message)) {
          const responsesArray = responses[category];
          return responsesArray[Math.floor(Math.random() * responsesArray.length)];
        }
      }
      return "I'm very sorry, but I'm not experienced enough to respond to that. Perhaps I'll get better in the future!";
    }

    // Handle sending a message.
    function sendMessage() {
      const chatInput = document.getElementById('chat-input');
      const userMessage = chatInput.value.trim();
      if (userMessage) {
        displayMessage(userMessage, 'user');
        chatInput.value = '';
        chatInput.focus();

        // Show typing indicator.
        const typingIndicator = displayMessage("●", 'bot');
        setTimeout(() => {
          typingIndicator.remove();
          const aiResponse = generateResponse(userMessage.toLowerCase());
          displayMessageWithTyping(aiResponse, 'bot');
        }, 1300);
      }
    }

    // File upload handler.
    function handleFileUpload(event) {
      const file = event.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function() {
        const fileContent = reader.result;
        let embedHTML = '';

        function escapeHTML(text) {
          return text
            .replace(/&/g, '&amp;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#39;');
        }

        if (file.type === 'text/html') {
          embedHTML = `<div>
              <h3>HTML File Content:</h3>
              <pre>${escapeHTML(fileContent)}</pre>
            </div>`;
        } else if (file.type === 'application/javascript' || file.type === 'text/javascript') {
          embedHTML = `<div>
              <h3>JavaScript File Content:</h3>
              <pre>${escapeHTML(fileContent)}</pre>
            </div>`;
        } else if (file.type === 'text/css') {
          embedHTML = `<div>
              <h3>CSS File Content:</h3>
              <pre>${escapeHTML(fileContent)}</pre>
            </div>`;
        } else if (file.type === 'text/lua') {
          embedHTML = `<div>
              <h3>Lua File Content:</h3>
              <pre>${escapeHTML(fileContent)}</pre>
            </div>`;
        } else if (file.type === 'text/plain' || file.name.endsWith('.bat')) {
          embedHTML = `<div>
              <h3>${file.name.endsWith('.bat') ? 'Batch Script' : 'Text File'} Content:</h3>
              <pre>${escapeHTML(fileContent)}</pre>
            </div>`;
        } else if (file.type.startsWith('image/')) {
          const blobURL = URL.createObjectURL(file);
          embedHTML = `<div>
              <h3>Uploaded Image: ${file.name}</h3>
              <img src="${blobURL}" alt="Uploaded Image" style="max-width: 100%; height: auto; border-radius: 12px;">
            </div>`;
        } else if (file.type === 'audio/mpeg' || file.type === 'audio/mp3') {
          const blobURL = URL.createObjectURL(file);
          embedHTML = `<div>
              <h3>Uploaded Audio: ${file.name}</h3>
              <audio controls>
                <source src="${blobURL}" type="${file.type}">
                Your browser does not support the audio element.
              </audio>
            </div>`;
        } else if (file.type === 'video/mp4') {
          const blobURL = URL.createObjectURL(file);
          embedHTML = `<div>
              <h3>Uploaded Video: ${file.name}</h3>
              <video controls style="max-width: 100%; height: auto; border-radius: 12px;">
                <source src="${blobURL}" type="${file.type}">
                Your browser does not support the video tag.
              </video>
            </div>`;
        } else {
          embedHTML = `<div>
              <h3>Unsupported File Type:</h3>
              <p>File type: ${file.type}</p>
              <pre>${escapeHTML(fileContent)}</pre>
            </div>`;
        }
        displayMessage(embedHTML, 'bot', true);
      };

      reader.onerror = function() {
        displayMessage("Error reading file.", 'bot');
      };

      reader.readAsText(file);
    }

    // Set up event listeners.
    document.getElementById('chat-input').addEventListener('keydown', (event) => {
      if (event.key === 'Enter' && !event.shiftKey) {
        event.preventDefault();
        sendMessage();
      }
    });
    document.getElementById('send-button').addEventListener('click', sendMessage);
    document.getElementById('upload-button').addEventListener('click', () => {
      document.getElementById('file-upload').click();
    });
    document.getElementById('file-upload').addEventListener('change', handleFileUpload);
  </script>
</body>
</html>
